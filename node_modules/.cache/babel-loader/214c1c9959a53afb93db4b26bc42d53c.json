{"ast":null,"code":"import _regeneratorRuntime from\"D:/Solana/metaplex/metaplex-master/js/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Solana/metaplex/metaplex-master/js/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import*as anchor from'@project-serum/anchor';import{TOKEN_PROGRAM_ID}from'@solana/spl-token';import{SystemProgram}from'@solana/web3.js';import{LAMPORTS_PER_SOL,SYSVAR_RENT_PUBKEY,TransactionInstruction}from'@solana/web3.js';export var FAIR_LAUNCH_PROGRAM_ID=new anchor.web3.PublicKey('faircnAB9k59Y4TXmLabBULeuTLgV7TkGMGNkjnA15j');export var toDate=function toDate(value){if(!value){return;}return new Date(value.toNumber()*1000);};var numberFormater=new Intl.NumberFormat('en-US',{style:'decimal',minimumFractionDigits:2,maximumFractionDigits:2});export var formatNumber={format:function format(val){if(!val){return'--';}return numberFormater.format(val);},asNumber:function asNumber(val){if(!val){return undefined;}return val.toNumber()/LAMPORTS_PER_SOL;}};export var SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID=new anchor.web3.PublicKey('ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL');export var CIVIC=new anchor.web3.PublicKey('gatem74V238djXdzWnJf94Wo1DcnuGkfijbf3AuBhfs');export var getFairLaunchTicketSeqLookup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(tokenMint,seq){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return anchor.web3.PublicKey.findProgramAddress([Buffer.from('fair_launch'),tokenMint.toBuffer(),seq.toArrayLike(Buffer,'le',8)],FAIR_LAUNCH_PROGRAM_ID);case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);}));return function getFairLaunchTicketSeqLookup(_x,_x2){return _ref.apply(this,arguments);};}();export var getAtaForMint=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(mint,buyer){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return anchor.web3.PublicKey.findProgramAddress([buyer.toBuffer(),TOKEN_PROGRAM_ID.toBuffer(),mint.toBuffer()],SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID);case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function getAtaForMint(_x3,_x4){return _ref2.apply(this,arguments);};}();export var getNetworkExpire=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(gatekeeperNetwork){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return anchor.web3.PublicKey.findProgramAddress([gatekeeperNetwork.toBuffer(),Buffer.from('expire')],CIVIC);case 2:return _context3.abrupt(\"return\",_context3.sent);case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function getNetworkExpire(_x5){return _ref3.apply(this,arguments);};}();export var getNetworkToken=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(wallet,gatekeeperNetwork){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return anchor.web3.PublicKey.findProgramAddress([wallet.toBuffer(),Buffer.from('gateway'),Buffer.from([0,0,0,0,0,0,0,0]),gatekeeperNetwork.toBuffer()],CIVIC);case 2:return _context4.abrupt(\"return\",_context4.sent);case 3:case\"end\":return _context4.stop();}}},_callee4);}));return function getNetworkToken(_x6,_x7){return _ref4.apply(this,arguments);};}();export var getFairLaunchTicket=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(tokenMint,buyer){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return anchor.web3.PublicKey.findProgramAddress([Buffer.from('fair_launch'),tokenMint.toBuffer(),buyer.toBuffer()],FAIR_LAUNCH_PROGRAM_ID);case 2:return _context5.abrupt(\"return\",_context5.sent);case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function getFairLaunchTicket(_x8,_x9){return _ref5.apply(this,arguments);};}();export function createAssociatedTokenAccountInstruction(associatedTokenAddress,payer,walletAddress,splTokenMintAddress){var keys=[{pubkey:payer,isSigner:true,isWritable:true},{pubkey:associatedTokenAddress,isSigner:false,isWritable:true},{pubkey:walletAddress,isSigner:false,isWritable:false},{pubkey:splTokenMintAddress,isSigner:false,isWritable:false},{pubkey:SystemProgram.programId,isSigner:false,isWritable:false},{pubkey:TOKEN_PROGRAM_ID,isSigner:false,isWritable:false},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:false,isWritable:false}];return new TransactionInstruction({keys:keys,programId:SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,data:Buffer.from([])});}","map":{"version":3,"sources":["D:/Solana/metaplex/metaplex-master/js/packages/fair-launch/src/utils.ts"],"names":["anchor","TOKEN_PROGRAM_ID","SystemProgram","LAMPORTS_PER_SOL","SYSVAR_RENT_PUBKEY","TransactionInstruction","FAIR_LAUNCH_PROGRAM_ID","web3","PublicKey","toDate","value","Date","toNumber","numberFormater","Intl","NumberFormat","style","minimumFractionDigits","maximumFractionDigits","formatNumber","format","val","asNumber","undefined","SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID","CIVIC","getFairLaunchTicketSeqLookup","tokenMint","seq","findProgramAddress","Buffer","from","toBuffer","toArrayLike","getAtaForMint","mint","buyer","getNetworkExpire","gatekeeperNetwork","getNetworkToken","wallet","getFairLaunchTicket","createAssociatedTokenAccountInstruction","associatedTokenAddress","payer","walletAddress","splTokenMintAddress","keys","pubkey","isSigner","isWritable","programId","data"],"mappings":"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","sourcesContent":["import * as anchor from '@project-serum/anchor';\nimport { TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport { SystemProgram } from '@solana/web3.js';\nimport {\n  LAMPORTS_PER_SOL,\n  SYSVAR_RENT_PUBKEY,\n  TransactionInstruction,\n} from '@solana/web3.js';\n\nexport interface AlertState {\n  open: boolean;\n  message: string;\n  severity: 'success' | 'info' | 'warning' | 'error' | undefined;\n}\n\nexport const FAIR_LAUNCH_PROGRAM_ID = new anchor.web3.PublicKey(\n  'faircnAB9k59Y4TXmLabBULeuTLgV7TkGMGNkjnA15j',\n);\n\nexport const toDate = (value?: anchor.BN) => {\n  if (!value) {\n    return;\n  }\n\n  return new Date(value.toNumber() * 1000);\n};\n\nconst numberFormater = new Intl.NumberFormat('en-US', {\n  style: 'decimal',\n  minimumFractionDigits: 2,\n  maximumFractionDigits: 2,\n});\n\nexport const formatNumber = {\n  format: (val?: number) => {\n    if (!val) {\n      return '--';\n    }\n\n    return numberFormater.format(val);\n  },\n  asNumber: (val?: anchor.BN) => {\n    if (!val) {\n      return undefined;\n    }\n\n    return val.toNumber() / LAMPORTS_PER_SOL;\n  },\n};\n\nexport const SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID =\n  new anchor.web3.PublicKey('ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL');\n\nexport const CIVIC = new anchor.web3.PublicKey(\n  'gatem74V238djXdzWnJf94Wo1DcnuGkfijbf3AuBhfs',\n);\nexport const getFairLaunchTicketSeqLookup = async (\n  tokenMint: anchor.web3.PublicKey,\n  seq: anchor.BN,\n): Promise<[anchor.web3.PublicKey, number]> => {\n  return await anchor.web3.PublicKey.findProgramAddress(\n    [\n      Buffer.from('fair_launch'),\n      tokenMint.toBuffer(),\n      seq.toArrayLike(Buffer, 'le', 8),\n    ],\n    FAIR_LAUNCH_PROGRAM_ID,\n  );\n};\n\nexport const getAtaForMint = async (\n  mint: anchor.web3.PublicKey,\n  buyer: anchor.web3.PublicKey,\n): Promise<[anchor.web3.PublicKey, number]> => {\n  return await anchor.web3.PublicKey.findProgramAddress(\n    [buyer.toBuffer(), TOKEN_PROGRAM_ID.toBuffer(), mint.toBuffer()],\n    SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n  );\n};\n\nexport const getNetworkExpire = async (\n  gatekeeperNetwork: anchor.web3.PublicKey,\n): Promise<[anchor.web3.PublicKey, number]> => {\n  return await anchor.web3.PublicKey.findProgramAddress(\n    [gatekeeperNetwork.toBuffer(), Buffer.from('expire')],\n    CIVIC,\n  );\n};\n\nexport const getNetworkToken = async (\n  wallet: anchor.web3.PublicKey,\n  gatekeeperNetwork: anchor.web3.PublicKey,\n): Promise<[anchor.web3.PublicKey, number]> => {\n  return await anchor.web3.PublicKey.findProgramAddress(\n    [\n      wallet.toBuffer(),\n      Buffer.from('gateway'),\n      Buffer.from([0, 0, 0, 0, 0, 0, 0, 0]),\n      gatekeeperNetwork.toBuffer(),\n    ],\n    CIVIC,\n  );\n};\n\nexport const getFairLaunchTicket = async (\n  tokenMint: anchor.web3.PublicKey,\n  buyer: anchor.web3.PublicKey,\n): Promise<[anchor.web3.PublicKey, number]> => {\n  return await anchor.web3.PublicKey.findProgramAddress(\n    [Buffer.from('fair_launch'), tokenMint.toBuffer(), buyer.toBuffer()],\n    FAIR_LAUNCH_PROGRAM_ID,\n  );\n};\n\nexport function createAssociatedTokenAccountInstruction(\n  associatedTokenAddress: anchor.web3.PublicKey,\n  payer: anchor.web3.PublicKey,\n  walletAddress: anchor.web3.PublicKey,\n  splTokenMintAddress: anchor.web3.PublicKey,\n) {\n  const keys = [\n    {\n      pubkey: payer,\n      isSigner: true,\n      isWritable: true,\n    },\n    {\n      pubkey: associatedTokenAddress,\n      isSigner: false,\n      isWritable: true,\n    },\n    {\n      pubkey: walletAddress,\n      isSigner: false,\n      isWritable: false,\n    },\n    {\n      pubkey: splTokenMintAddress,\n      isSigner: false,\n      isWritable: false,\n    },\n    {\n      pubkey: SystemProgram.programId,\n      isSigner: false,\n      isWritable: false,\n    },\n    {\n      pubkey: TOKEN_PROGRAM_ID,\n      isSigner: false,\n      isWritable: false,\n    },\n    {\n      pubkey: SYSVAR_RENT_PUBKEY,\n      isSigner: false,\n      isWritable: false,\n    },\n  ];\n  return new TransactionInstruction({\n    keys,\n    programId: SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n    data: Buffer.from([]),\n  });\n}\n"]},"metadata":{},"sourceType":"module"}
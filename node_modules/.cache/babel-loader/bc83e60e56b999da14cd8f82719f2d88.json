{"ast":null,"code":"var _jsxFileName = \"D:\\\\Solana\\\\metaplex\\\\metaplex-master\\\\js\\\\packages\\\\fair-launch\\\\src\\\\Home.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useMemo, useState } from 'react';\nimport styled from 'styled-components';\nimport { CircularProgress, Container, IconButton, Link, Slider, Snackbar } from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport { createStyles } from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Alert from '@material-ui/lab/Alert';\nimport { LAMPORTS_PER_SOL, PublicKey } from '@solana/web3.js';\nimport { useWallet } from '@solana/wallet-adapter-react';\nimport { WalletDialogButton } from '@solana/wallet-adapter-material-ui';\nimport { awaitTransactionSignatureConfirmation, CANDY_MACHINE_PROGRAM, getCandyMachineState, mintOneToken } from './candy-machine';\nimport { getFairLaunchState, punchTicket, purchaseTicket } from './fair-launch';\nimport { formatNumber, getAtaForMint, toDate } from './utils';\nimport { CTAButton, MintButton } from './MintButton';\nimport { AntiRug } from './AntiRug';\nimport { getPhase, Phase, PhaseHeader } from './PhaseHeader';\nimport { GatewayProvider } from '@civic/solana-gateway-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ConnectButton = styled(WalletDialogButton)`\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n`;\n_c = ConnectButton;\nconst MintContainer = styled.div``; // add your styles here\n\n_c2 = MintContainer;\n\nconst dialogStyles = theme => createStyles({\n  root: {\n    margin: 0,\n    padding: theme.spacing(2)\n  },\n  closeButton: {\n    position: 'absolute',\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500]\n  }\n});\n\nconst ValueSlider = styled(Slider)({\n  color: '#C0D5FE',\n  height: 8,\n  '& > *': {\n    height: 4\n  },\n  '& .MuiSlider-track': {\n    border: 'none',\n    height: 4\n  },\n  '& .MuiSlider-thumb': {\n    height: 24,\n    width: 24,\n    marginTop: -10,\n    background: 'linear-gradient(180deg, #604AE5 0%, #813EEE 100%)',\n    border: '2px solid currentColor',\n    '&:focus, &:hover, &.Mui-active, &.Mui-focusVisible': {\n      boxShadow: 'inherit'\n    },\n    '&:before': {\n      display: 'none'\n    }\n  },\n  '& .MuiSlider-valueLabel': {\n    '& > *': {\n      background: 'linear-gradient(180deg, #604AE5 0%, #813EEE 100%)'\n    },\n    lineHeight: 1.2,\n    fontSize: 12,\n    padding: 0,\n    width: 32,\n    height: 32,\n    marginLeft: 9\n  }\n});\nconst FAIR_LAUNCH_LOTTERY_SIZE = 8 + // discriminator\n32 + // fair launch\n1 + // bump\n8; // size of bitmask ones\n\nconst isWinner = fairLaunch => {\n  var _fairLaunch$ticket$da, _fairLaunch$ticket$da2, _fairLaunch$ticket$da3;\n\n  if (!(fairLaunch !== null && fairLaunch !== void 0 && fairLaunch.lottery.data) || !(fairLaunch !== null && fairLaunch !== void 0 && fairLaunch.lottery.data.length) || !(fairLaunch !== null && fairLaunch !== void 0 && (_fairLaunch$ticket$da = fairLaunch.ticket.data) !== null && _fairLaunch$ticket$da !== void 0 && _fairLaunch$ticket$da.seq) || !(fairLaunch !== null && fairLaunch !== void 0 && fairLaunch.state.phaseThreeStarted)) {\n    return false;\n  }\n\n  const myByte = fairLaunch.lottery.data[FAIR_LAUNCH_LOTTERY_SIZE + Math.floor(((_fairLaunch$ticket$da2 = fairLaunch.ticket.data) === null || _fairLaunch$ticket$da2 === void 0 ? void 0 : _fairLaunch$ticket$da2.seq.toNumber()) / 8)];\n  const positionFromRight = 7 - ((_fairLaunch$ticket$da3 = fairLaunch.ticket.data) === null || _fairLaunch$ticket$da3 === void 0 ? void 0 : _fairLaunch$ticket$da3.seq.toNumber()) % 8;\n  const mask = Math.pow(2, positionFromRight);\n  const isWinner = myByte & mask;\n  return isWinner > 0;\n};\n\nconst Home = props => {\n  _s();\n\n  var _fairLaunch$ticket, _fairLaunch$ticket$da5, _fairLaunch$ticket$da6, _fairLaunch$state, _fairLaunch$state$dat, _fairLaunch$state2, _fairLaunch$state2$da, _fairLaunch$ticket2, _fairLaunch$ticket2$d, _fairLaunch$ticket3, _fairLaunch$ticket3$d, _fairLaunch$ticket4, _fairLaunch$ticket4$d, _fairLaunch$ticket5, _fairLaunch$ticket5$d, _fairLaunch$ticket6, _fairLaunch$ticket6$d, _fairLaunch$ticket7, _fairLaunch$ticket7$d, _fairLaunch$ticket8, _fairLaunch$ticket8$d, _fairLaunch$ticket$da7, _fairLaunch$ticket$da8, _candyMachine$state, _candyMachine$state$g, _fairLaunch$ticket$da9, _fairLaunch$state3, _fairLaunch$state3$da, _fairLaunch$state4, _fairLaunch$state4$da, _toDate;\n\n  const [fairLaunchBalance, setFairLaunchBalance] = useState(0);\n  const [yourSOLBalance, setYourSOLBalance] = useState(null);\n  const rpcUrl = props.rpcHost;\n  const [isMinting, setIsMinting] = useState(false); // true when user got to press MINT\n\n  const [contributed, setContributed] = useState(0);\n  const wallet = useWallet();\n  const anchorWallet = useMemo(() => {\n    if (!wallet || !wallet.publicKey || !wallet.signAllTransactions || !wallet.signTransaction) {\n      return;\n    }\n\n    return {\n      publicKey: wallet.publicKey,\n      signAllTransactions: wallet.signAllTransactions,\n      signTransaction: wallet.signTransaction\n    };\n  }, [wallet]);\n  const [alertState, setAlertState] = useState({\n    open: false,\n    message: '',\n    severity: undefined\n  });\n  const [fairLaunch, setFairLaunch] = useState();\n  const [candyMachine, setCandyMachine] = useState();\n  const [howToOpen, setHowToOpen] = useState(false);\n  const [refundExplainerOpen, setRefundExplainerOpen] = useState(false);\n\n  const onMint = async () => {\n    try {\n      var _document$getElementB;\n\n      setIsMinting(true);\n      (_document$getElementB = document.getElementById('#identity')) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.click();\n\n      if (wallet.connected && candyMachine !== null && candyMachine !== void 0 && candyMachine.program && wallet.publicKey) {\n        var _fairLaunch$ticket$da4, _status;\n\n        if (fairLaunch !== null && fairLaunch !== void 0 && (_fairLaunch$ticket$da4 = fairLaunch.ticket.data) !== null && _fairLaunch$ticket$da4 !== void 0 && _fairLaunch$ticket$da4.state.unpunched && isWinner(fairLaunch)) {\n          await onPunchTicket();\n        }\n\n        const mintTxId = (await mintOneToken(candyMachine, wallet.publicKey))[0];\n        let status = {\n          err: true\n        };\n\n        if (mintTxId) {\n          status = await awaitTransactionSignatureConfirmation(mintTxId, props.txTimeout, props.connection, 'singleGossip', true);\n        }\n\n        if (!((_status = status) !== null && _status !== void 0 && _status.err)) {\n          setAlertState({\n            open: true,\n            message: 'Congratulations! Mint succeeded!',\n            severity: 'success'\n          });\n        } else {\n          setAlertState({\n            open: true,\n            message: 'Mint failed! Please try again!',\n            severity: 'error'\n          });\n        }\n      }\n    } catch (error) {\n      // TODO: blech:\n      let message = error.msg || 'Minting failed! Please try again!';\n\n      if (!error.msg) {\n        if (!error.message) {\n          message = 'Transaction Timeout! Please try again.';\n        } else if (error.message.indexOf('0x138')) {} else if (error.message.indexOf('0x137')) {\n          message = `SOLD OUT!`;\n        } else if (error.message.indexOf('0x135')) {\n          message = `Insufficient funds to mint. Please fund your wallet.`;\n        }\n      } else {\n        if (error.code === 311) {\n          message = `SOLD OUT!`;\n          window.location.reload();\n        } else if (error.code === 312) {\n          message = `Minting period hasn't started yet.`;\n        }\n      }\n\n      setAlertState({\n        open: true,\n        message,\n        severity: 'error'\n      });\n    } finally {\n      setIsMinting(false);\n    }\n  };\n\n  useEffect(() => {\n    (async () => {\n      if (!anchorWallet) {\n        return;\n      }\n\n      try {\n        const balance = await props.connection.getBalance(anchorWallet.publicKey);\n        setYourSOLBalance(balance);\n\n        if (props.fairLaunchId) {\n          const state = await getFairLaunchState(anchorWallet, props.fairLaunchId, props.connection);\n          setFairLaunch(state);\n\n          try {\n            if (state.state.tokenMint) {\n              const fairLaunchBalance = await props.connection.getTokenAccountBalance((await getAtaForMint(state.state.tokenMint, anchorWallet.publicKey))[0]);\n\n              if (fairLaunchBalance.value) {\n                setFairLaunchBalance(fairLaunchBalance.value.uiAmount || 0);\n              }\n            }\n          } catch (e) {\n            console.log('Problem getting fair launch token balance');\n            console.log(e);\n          }\n\n          if (contributed === 0) {\n            const phase = getPhase(state, undefined);\n\n            if (phase === Phase.SetPrice) {\n              const ticks = (state.state.data.priceRangeEnd.toNumber() - state.state.data.priceRangeStart.toNumber()) / state.state.data.tickSize.toNumber();\n              const randomTick = Math.round(Math.random() * ticks);\n              setContributed((state.state.data.priceRangeStart.toNumber() + randomTick * state.state.data.tickSize.toNumber()) / LAMPORTS_PER_SOL);\n            } else {\n              setContributed((state.state.currentMedian || state.state.data.priceRangeStart).toNumber() / LAMPORTS_PER_SOL);\n            }\n          }\n        } else {\n          console.log('No fair launch detected in configuration.');\n        }\n      } catch (e) {\n        console.log('Problem getting fair launch state');\n        console.log(e);\n      }\n\n      if (props.candyMachineId) {\n        try {\n          const cndy = await getCandyMachineState(anchorWallet, props.candyMachineId, props.connection);\n          setCandyMachine(cndy);\n        } catch (e) {\n          console.log('Problem getting candy machine state');\n          console.log(e);\n        }\n      } else {\n        console.log('No candy machine detected in configuration.');\n      }\n    })();\n  }, [anchorWallet, props.candyMachineId, props.connection, props.fairLaunchId, contributed]);\n  const min = formatNumber.asNumber(fairLaunch === null || fairLaunch === void 0 ? void 0 : fairLaunch.state.data.priceRangeStart);\n  const max = formatNumber.asNumber(fairLaunch === null || fairLaunch === void 0 ? void 0 : fairLaunch.state.data.priceRangeEnd);\n  const step = formatNumber.asNumber(fairLaunch === null || fairLaunch === void 0 ? void 0 : fairLaunch.state.data.tickSize);\n  const median = formatNumber.asNumber(fairLaunch === null || fairLaunch === void 0 ? void 0 : fairLaunch.state.currentMedian);\n  const phase = getPhase(fairLaunch, candyMachine);\n  console.log('Phase', phase);\n  const marks = [{\n    value: min || 0,\n    label: `${min} SOL`\n  }, // TODO:L\n  ...(phase === Phase.SetPrice ? [] : [{\n    value: median || 0,\n    label: `${median}`\n  }]), // display user comitted value\n  // {\n  //   value: 37,\n  //   label: '37Â°C',\n  // },\n  {\n    value: max || 0,\n    label: `${max} SOL`\n  }].filter(_ => _ !== undefined && _.value !== 0);\n\n  const onDeposit = async () => {\n    if (!anchorWallet) {\n      return;\n    }\n\n    console.log('deposit');\n    setIsMinting(true);\n\n    try {\n      await purchaseTicket(contributed, anchorWallet, fairLaunch);\n      setIsMinting(false);\n      setAlertState({\n        open: true,\n        message: `Congratulations! Bid ${fairLaunch !== null && fairLaunch !== void 0 && fairLaunch.ticket.data ? 'updated' : 'inserted'}!`,\n        severity: 'success'\n      });\n    } catch (e) {\n      console.log(e);\n      setIsMinting(false);\n      setAlertState({\n        open: true,\n        message: 'Something went wrong.',\n        severity: 'error'\n      });\n    }\n  };\n\n  const onRefundTicket = async () => {\n    if (!anchorWallet) {\n      return;\n    }\n\n    console.log('refund');\n\n    try {\n      setIsMinting(true);\n      await purchaseTicket(0, anchorWallet, fairLaunch);\n      setIsMinting(false);\n      setAlertState({\n        open: true,\n        message: 'Congratulations! Funds withdrawn. This is an irreversible action.',\n        severity: 'success'\n      });\n    } catch (e) {\n      console.log(e);\n      setIsMinting(false);\n      setAlertState({\n        open: true,\n        message: 'Something went wrong.',\n        severity: 'error'\n      });\n    }\n  };\n\n  const onPunchTicket = async () => {\n    if (!anchorWallet || !fairLaunch || !fairLaunch.ticket) {\n      return;\n    }\n\n    console.log('punch');\n    setIsMinting(true);\n\n    try {\n      await punchTicket(anchorWallet, fairLaunch);\n      setIsMinting(false);\n      setAlertState({\n        open: true,\n        message: 'Congratulations! Ticket punched!',\n        severity: 'success'\n      });\n    } catch (e) {\n      console.log(e);\n      setIsMinting(false);\n      setAlertState({\n        open: true,\n        message: 'Something went wrong.',\n        severity: 'error'\n      });\n    }\n  };\n\n  const candyMachinePredatesFairLaunch = (candyMachine === null || candyMachine === void 0 ? void 0 : candyMachine.state.goLiveDate) && (fairLaunch === null || fairLaunch === void 0 ? void 0 : fairLaunch.state.data.phaseTwoEnd) && (candyMachine === null || candyMachine === void 0 ? void 0 : candyMachine.state.goLiveDate.lt(fairLaunch === null || fairLaunch === void 0 ? void 0 : fairLaunch.state.data.phaseTwoEnd));\n  const notEnoughSOL = !!(yourSOLBalance != null && fairLaunch !== null && fairLaunch !== void 0 && fairLaunch.state.data.priceRangeStart && fairLaunch !== null && fairLaunch !== void 0 && fairLaunch.state.data.fee && yourSOLBalance + ((fairLaunch === null || fairLaunch === void 0 ? void 0 : (_fairLaunch$ticket = fairLaunch.ticket) === null || _fairLaunch$ticket === void 0 ? void 0 : (_fairLaunch$ticket$da5 = _fairLaunch$ticket.data) === null || _fairLaunch$ticket$da5 === void 0 ? void 0 : _fairLaunch$ticket$da5.amount.toNumber()) || 0) < contributed * LAMPORTS_PER_SOL + (fairLaunch === null || fairLaunch === void 0 ? void 0 : fairLaunch.state.data.fee.toNumber()) + 0.01);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    style: {\n      marginTop: 100\n    },\n    children: [fairLaunch && /*#__PURE__*/_jsxDEV(AntiRug, {\n      fairLaunch: fairLaunch,\n      isMinting: [isMinting, setIsMinting],\n      setAlertState: setAlertState\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"xs\",\n      style: {\n        position: 'relative'\n      },\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        style: {\n          padding: 24,\n          backgroundColor: '#151A1F',\n          borderRadius: 6\n        },\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          justifyContent: \"center\",\n          direction: \"column\",\n          children: [/*#__PURE__*/_jsxDEV(PhaseHeader, {\n            phase: phase,\n            fairLaunch: fairLaunch,\n            candyMachine: candyMachine,\n            rpcUrl: rpcUrl,\n            candyMachinePredatesFairLaunch: !!candyMachinePredatesFairLaunch\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 13\n          }, this), fairLaunch && /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            direction: \"column\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            style: {\n              height: 200,\n              marginTop: 20,\n              marginBottom: 20,\n              background: '#384457',\n              borderRadius: 6\n            },\n            children: fairLaunch.ticket.data ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                children: \"Your bid\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 515,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                style: {\n                  fontWeight: 900\n                },\n                children: [formatNumber.format(((fairLaunch === null || fairLaunch === void 0 ? void 0 : (_fairLaunch$ticket$da6 = fairLaunch.ticket.data) === null || _fairLaunch$ticket$da6 === void 0 ? void 0 : _fairLaunch$ticket$da6.amount.toNumber()) || 0) / LAMPORTS_PER_SOL), ' ', \"SOL\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 516,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true) : [Phase.AnticipationPhase, Phase.SetPrice].includes(phase) ? /*#__PURE__*/_jsxDEV(Typography, {\n              children: [\"You haven't entered this raffle yet. \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 528,\n                columnNumber: 58\n              }, this), (fairLaunch === null || fairLaunch === void 0 ? void 0 : (_fairLaunch$state = fairLaunch.state) === null || _fairLaunch$state === void 0 ? void 0 : (_fairLaunch$state$dat = _fairLaunch$state.data) === null || _fairLaunch$state$dat === void 0 ? void 0 : _fairLaunch$state$dat.fee) && /*#__PURE__*/_jsxDEV(\"span\", {\n                children: /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: [\"All initial bids will incur a \\u25CE\", ' ', (fairLaunch === null || fairLaunch === void 0 ? void 0 : (_fairLaunch$state2 = fairLaunch.state) === null || _fairLaunch$state2 === void 0 ? void 0 : (_fairLaunch$state2$da = _fairLaunch$state2.data) === null || _fairLaunch$state2$da === void 0 ? void 0 : _fairLaunch$state2$da.fee.toNumber()) / LAMPORTS_PER_SOL, ' ', \"fee.\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 531,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 530,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 527,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n              children: \"You didn't participate in this raffle.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 541,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 15\n          }, this), fairLaunch && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [[Phase.SetPrice, Phase.GracePeriod, Phase.RaffleFinished, Phase.Lottery].includes(phase) && (fairLaunch === null || fairLaunch === void 0 ? void 0 : (_fairLaunch$ticket2 = fairLaunch.ticket) === null || _fairLaunch$ticket2 === void 0 ? void 0 : (_fairLaunch$ticket2$d = _fairLaunch$ticket2.data) === null || _fairLaunch$ticket2$d === void 0 ? void 0 : _fairLaunch$ticket2$d.state.withdrawn) && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                paddingTop: '15px'\n              },\n              children: /*#__PURE__*/_jsxDEV(Alert, {\n                severity: \"error\",\n                children: \"Your bid was withdrawn and cannot be adjusted or re-inserted.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 558,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 21\n            }, this), [Phase.GracePeriod].includes(phase) && fairLaunch.state.currentMedian && (fairLaunch === null || fairLaunch === void 0 ? void 0 : (_fairLaunch$ticket3 = fairLaunch.ticket) === null || _fairLaunch$ticket3 === void 0 ? void 0 : (_fairLaunch$ticket3$d = _fairLaunch$ticket3.data) === null || _fairLaunch$ticket3$d === void 0 ? void 0 : _fairLaunch$ticket3$d.amount) && !(fairLaunch !== null && fairLaunch !== void 0 && (_fairLaunch$ticket4 = fairLaunch.ticket) !== null && _fairLaunch$ticket4 !== void 0 && (_fairLaunch$ticket4$d = _fairLaunch$ticket4.data) !== null && _fairLaunch$ticket4$d !== void 0 && _fairLaunch$ticket4$d.state.withdrawn) && fairLaunch.state.currentMedian.gt(fairLaunch === null || fairLaunch === void 0 ? void 0 : (_fairLaunch$ticket5 = fairLaunch.ticket) === null || _fairLaunch$ticket5 === void 0 ? void 0 : (_fairLaunch$ticket5$d = _fairLaunch$ticket5.data) === null || _fairLaunch$ticket5$d === void 0 ? void 0 : _fairLaunch$ticket5$d.amount) && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                paddingTop: '15px'\n              },\n              children: /*#__PURE__*/_jsxDEV(Alert, {\n                severity: \"warning\",\n                children: \"Your bid is currently below the median and will not be eligible for the raffle.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 572,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 571,\n              columnNumber: 21\n            }, this), [Phase.RaffleFinished, Phase.Lottery].includes(phase) && fairLaunch.state.currentMedian && (fairLaunch === null || fairLaunch === void 0 ? void 0 : (_fairLaunch$ticket6 = fairLaunch.ticket) === null || _fairLaunch$ticket6 === void 0 ? void 0 : (_fairLaunch$ticket6$d = _fairLaunch$ticket6.data) === null || _fairLaunch$ticket6$d === void 0 ? void 0 : _fairLaunch$ticket6$d.amount) && !(fairLaunch !== null && fairLaunch !== void 0 && (_fairLaunch$ticket7 = fairLaunch.ticket) !== null && _fairLaunch$ticket7 !== void 0 && (_fairLaunch$ticket7$d = _fairLaunch$ticket7.data) !== null && _fairLaunch$ticket7$d !== void 0 && _fairLaunch$ticket7$d.state.withdrawn) && fairLaunch.state.currentMedian.gt(fairLaunch === null || fairLaunch === void 0 ? void 0 : (_fairLaunch$ticket8 = fairLaunch.ticket) === null || _fairLaunch$ticket8 === void 0 ? void 0 : (_fairLaunch$ticket8$d = _fairLaunch$ticket8.data) === null || _fairLaunch$ticket8$d === void 0 ? void 0 : _fairLaunch$ticket8$d.amount) && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                paddingTop: '15px'\n              },\n              children: /*#__PURE__*/_jsxDEV(Alert, {\n                severity: \"error\",\n                children: [\"Your bid was below the median and was not included in the raffle. You may click \", /*#__PURE__*/_jsxDEV(\"em\", {\n                  children: \"Withdraw\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 588,\n                  columnNumber: 51\n                }, this), \" when the raffle ends or you will be automatically issued one when the Fair Launch authority withdraws from the treasury.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 586,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 585,\n              columnNumber: 21\n            }, this), notEnoughSOL && /*#__PURE__*/_jsxDEV(Alert, {\n              severity: \"error\",\n              children: \"You do not have enough SOL in your account to place this bid.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 595,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true), [Phase.SetPrice, Phase.GracePeriod].includes(phase) && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              style: {\n                marginTop: 40,\n                marginBottom: 20\n              },\n              children: contributed > 0 ? /*#__PURE__*/_jsxDEV(ValueSlider, {\n                min: min,\n                marks: marks,\n                max: max,\n                step: step,\n                value: contributed,\n                onChange: (ev, val) => setContributed(val),\n                valueLabelDisplay: \"auto\",\n                style: {\n                  width: 'calc(100% - 40px)',\n                  marginLeft: 20,\n                  height: 30\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 607,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  justifyContent: 'center',\n                  alignItems: 'center'\n                },\n                children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 629,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 622,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 605,\n              columnNumber: 17\n            }, this)\n          }, void 0, false), !wallet.connected ? /*#__PURE__*/_jsxDEV(ConnectButton, {\n            children: [\"Connect\", ' ', [Phase.SetPrice].includes(phase) ? 'to bid' : 'to see status']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [[Phase.SetPrice, Phase.GracePeriod].includes(phase) && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(CTAButton, {\n                onClick: onDeposit,\n                variant: \"contained\",\n                disabled: isMinting || !(fairLaunch !== null && fairLaunch !== void 0 && fairLaunch.ticket.data) && phase === Phase.GracePeriod || notEnoughSOL,\n                children: isMinting ? /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 656,\n                  columnNumber: 25\n                }, this) : !(fairLaunch !== null && fairLaunch !== void 0 && fairLaunch.ticket.data) ? 'Place bid' : 'Change bid'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 645,\n                columnNumber: 21\n              }, this)\n            }, void 0, false), [Phase.RaffleFinished].includes(phase) && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [isWinner(fairLaunch) && /*#__PURE__*/_jsxDEV(CTAButton, {\n                onClick: onPunchTicket,\n                variant: \"contained\",\n                disabled: (fairLaunch === null || fairLaunch === void 0 ? void 0 : (_fairLaunch$ticket$da7 = fairLaunch.ticket.data) === null || _fairLaunch$ticket$da7 === void 0 ? void 0 : _fairLaunch$ticket$da7.state.punched) !== undefined,\n                children: isMinting ? /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 677,\n                  columnNumber: 38\n                }, this) : 'Punch Ticket'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 670,\n                columnNumber: 23\n              }, this), !isWinner(fairLaunch) && /*#__PURE__*/_jsxDEV(CTAButton, {\n                onClick: onRefundTicket,\n                variant: \"contained\",\n                disabled: isMinting || (fairLaunch === null || fairLaunch === void 0 ? void 0 : fairLaunch.ticket.data) === undefined || (fairLaunch === null || fairLaunch === void 0 ? void 0 : (_fairLaunch$ticket$da8 = fairLaunch.ticket.data) === null || _fairLaunch$ticket$da8 === void 0 ? void 0 : _fairLaunch$ticket$da8.state.withdrawn) !== undefined,\n                children: isMinting ? /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 691,\n                  columnNumber: 38\n                }, this) : 'Withdraw'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 682,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true), phase === Phase.Phase4 && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [(!fairLaunch || isWinner(fairLaunch) || fairLaunchBalance > 0) && /*#__PURE__*/_jsxDEV(MintContainer, {\n                children: candyMachine !== null && candyMachine !== void 0 && candyMachine.state.isActive && candyMachine !== null && candyMachine !== void 0 && candyMachine.state.gatekeeper && wallet.publicKey && wallet.signTransaction ? /*#__PURE__*/_jsxDEV(GatewayProvider, {\n                  wallet: {\n                    publicKey: wallet.publicKey || new PublicKey(CANDY_MACHINE_PROGRAM),\n                    //@ts-ignore\n                    signTransaction: wallet.signTransaction\n                  } // // Replace with following when added\n                  // gatekeeperNetwork={candyMachine.state.gatekeeper_network}\n                  ,\n                  gatekeeperNetwork: candyMachine === null || candyMachine === void 0 ? void 0 : (_candyMachine$state = candyMachine.state) === null || _candyMachine$state === void 0 ? void 0 : (_candyMachine$state$g = _candyMachine$state.gatekeeper) === null || _candyMachine$state$g === void 0 ? void 0 : _candyMachine$state$g.gatekeeperNetwork // This is the ignite (captcha) network\n                  /// Don't need this for mainnet\n                  ,\n                  clusterUrl: rpcUrl,\n                  options: {\n                    autoShowModal: false\n                  },\n                  children: /*#__PURE__*/_jsxDEV(MintButton, {\n                    candyMachine: candyMachine,\n                    fairLaunch: fairLaunch,\n                    isMinting: isMinting,\n                    fairLaunchBalance: fairLaunchBalance,\n                    onMint: onMint\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 724,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 707,\n                  columnNumber: 27\n                }, this) : /*#__PURE__*/_jsxDEV(MintButton, {\n                  candyMachine: candyMachine,\n                  fairLaunch: fairLaunch,\n                  isMinting: isMinting,\n                  fairLaunchBalance: fairLaunchBalance,\n                  onMint: onMint\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 733,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 702,\n                columnNumber: 23\n              }, this), !(!fairLaunch || isWinner(fairLaunch) || fairLaunchBalance > 0) && /*#__PURE__*/_jsxDEV(CTAButton, {\n                onClick: onRefundTicket,\n                variant: \"contained\",\n                disabled: isMinting || (fairLaunch === null || fairLaunch === void 0 ? void 0 : fairLaunch.ticket.data) === undefined || (fairLaunch === null || fairLaunch === void 0 ? void 0 : (_fairLaunch$ticket$da9 = fairLaunch.ticket.data) === null || _fairLaunch$ticket$da9 === void 0 ? void 0 : _fairLaunch$ticket$da9.state.withdrawn) !== undefined,\n                children: isMinting ? /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 758,\n                  columnNumber: 38\n                }, this) : 'Withdraw'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 749,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 642,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            justifyContent: \"space-between\",\n            color: \"textSecondary\",\n            children: [fairLaunch && /*#__PURE__*/_jsxDEV(Link, {\n              component: \"button\",\n              variant: \"body2\",\n              color: \"textSecondary\",\n              align: \"left\",\n              onClick: () => {\n                setHowToOpen(true);\n              },\n              children: \"How this raffle works\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 772,\n              columnNumber: 17\n            }, this), (fairLaunch === null || fairLaunch === void 0 ? void 0 : fairLaunch.ticket.data) && /*#__PURE__*/_jsxDEV(Link, {\n              component: \"button\",\n              variant: \"body2\",\n              color: \"textSecondary\",\n              align: \"right\",\n              onClick: () => {\n                if (!fairLaunch || phase === Phase.Lottery || isWinner(fairLaunch) || fairLaunchBalance > 0) {\n                  setRefundExplainerOpen(true);\n                } else {\n                  onRefundTicket();\n                }\n              },\n              children: \"Withdraw funds\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 785,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 766,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n            open: refundExplainerOpen,\n            onClose: () => setRefundExplainerOpen(false),\n            PaperProps: {\n              style: {\n                backgroundColor: '#222933',\n                borderRadius: 6\n              }\n            },\n            children: /*#__PURE__*/_jsxDEV(MuiDialogContent, {\n              style: {\n                padding: 24\n              },\n              children: \"During raffle phases, or if you are a winner, or if this website is not configured to be a fair launch but simply a candy machine, refunds are disallowed.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 814,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 807,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n            open: howToOpen,\n            onClose: () => setHowToOpen(false),\n            PaperProps: {\n              style: {\n                backgroundColor: '#222933',\n                borderRadius: 6\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(MuiDialogTitle, {\n              disableTypography: true,\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'space-between'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                component: \"button\",\n                variant: \"h6\",\n                color: \"textSecondary\",\n                onClick: () => {\n                  setHowToOpen(true);\n                },\n                children: \"How it works\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 835,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                \"aria-label\": \"close\",\n                className: dialogStyles.closeButton,\n                onClick: () => setHowToOpen(false),\n                children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 850,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 845,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 827,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MuiDialogContent, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                children: \"Phase 1 - Set the fair price:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 854,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                gutterBottom: true,\n                color: \"textSecondary\",\n                children: [\"Enter a bid in the range provided by the artist. The median of all bids will be the \\\"fair\\\" price of the raffle ticket.\", ' ', (fairLaunch === null || fairLaunch === void 0 ? void 0 : (_fairLaunch$state3 = fairLaunch.state) === null || _fairLaunch$state3 === void 0 ? void 0 : (_fairLaunch$state3$da = _fairLaunch$state3.data) === null || _fairLaunch$state3$da === void 0 ? void 0 : _fairLaunch$state3$da.fee) && /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: [\"All bids will incur a \\u25CE\", ' ', (fairLaunch === null || fairLaunch === void 0 ? void 0 : (_fairLaunch$state4 = fairLaunch.state) === null || _fairLaunch$state4 === void 0 ? void 0 : (_fairLaunch$state4$da = _fairLaunch$state4.data) === null || _fairLaunch$state4$da === void 0 ? void 0 : _fairLaunch$state4$da.fee.toNumber()) / LAMPORTS_PER_SOL, ' ', \"fee.\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 862,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 861,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 857,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                children: \"Phase 2 - Grace period:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 871,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                gutterBottom: true,\n                color: \"textSecondary\",\n                children: \"If your bid was at or above the fair price, you automatically get a raffle ticket at that price. There's nothing else you need to do. Your excess SOL will be returned to you when the Fair Launch authority withdraws from the treasury. If your bid is below the median price, you can still opt in at the fair price during this phase.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 872,\n                columnNumber: 17\n              }, this), candyMachinePredatesFairLaunch ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  children: \"Phase 3 - The Candy Machine:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 882,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  gutterBottom: true,\n                  color: \"textSecondary\",\n                  children: \"Everyone who got a raffle ticket at the fair price is entered to win an NFT. If you win an NFT, congrats. If you don\\u2019t, no worries, your SOL will go right back into your wallet.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 885,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  children: \"Phase 3 - The Lottery:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 894,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  gutterBottom: true,\n                  color: \"textSecondary\",\n                  children: \"Everyone who got a raffle ticket at the fair price is entered to win a Fair Launch Token that entitles them to an NFT at a later date using a Candy Machine here. If you don\\u2019t win, no worries, your SOL will go right back into your wallet.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 895,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  children: \"Phase 4 - The Candy Machine:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 902,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  gutterBottom: true,\n                  color: \"textSecondary\",\n                  children: [\"On\", ' ', candyMachine !== null && candyMachine !== void 0 && candyMachine.state.goLiveDate ? (_toDate = toDate(candyMachine === null || candyMachine === void 0 ? void 0 : candyMachine.state.goLiveDate)) === null || _toDate === void 0 ? void 0 : _toDate.toLocaleString() : ' some later date', \", you will be able to exchange your Fair Launch token for an NFT using the Candy Machine at this site by pressing the Mint Button.\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 905,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 853,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 820,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 7\n    }, this), fairLaunch && /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"xs\",\n      style: {\n        position: 'relative',\n        marginTop: 10\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          margin: 20\n        },\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          direction: \"row\",\n          wrap: \"nowrap\",\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            md: 4,\n            direction: \"column\",\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"textSecondary\",\n              children: \"Bids\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 942,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              color: \"textPrimary\",\n              style: {\n                fontWeight: 'bold'\n              },\n              children: (fairLaunch === null || fairLaunch === void 0 ? void 0 : fairLaunch.state.numberTicketsSold.toNumber()) || 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 945,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 941,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            md: 4,\n            direction: \"column\",\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"textSecondary\",\n              children: \"Median bid\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 954,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              color: \"textPrimary\",\n              style: {\n                fontWeight: 'bold'\n              },\n              children: [\"\\u25CE\", ' ', phase === Phase.AnticipationPhase || phase === Phase.SetPrice ? '???' : formatNumber.format(median)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 957,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 953,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            md: 4,\n            direction: \"column\",\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"textSecondary\",\n              children: \"Total raised\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 969,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              color: \"textPrimary\",\n              style: {\n                fontWeight: 'bold'\n              },\n              children: [\"\\u25CE\", ' ', formatNumber.format(((fairLaunch === null || fairLaunch === void 0 ? void 0 : fairLaunch.treasury) || 0) / LAMPORTS_PER_SOL)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 972,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 968,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 940,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 939,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 935,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: alertState.open,\n      autoHideDuration: 6000,\n      onClose: () => setAlertState({ ...alertState,\n        open: false\n      }),\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: () => setAlertState({ ...alertState,\n          open: false\n        }),\n        severity: alertState.severity,\n        children: alertState.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 992,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 987,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 479,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Home, \"UpeaUWniTIWVISk/RBuWbXxjxA4=\", false, function () {\n  return [useWallet];\n});\n\n_c3 = Home;\nexport default Home;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"ConnectButton\");\n$RefreshReg$(_c2, \"MintContainer\");\n$RefreshReg$(_c3, \"Home\");","map":{"version":3,"sources":["D:/Solana/metaplex/metaplex-master/js/packages/fair-launch/src/Home.tsx"],"names":["useEffect","useMemo","useState","styled","CircularProgress","Container","IconButton","Link","Slider","Snackbar","Paper","Typography","Grid","createStyles","Dialog","MuiDialogTitle","MuiDialogContent","CloseIcon","Alert","LAMPORTS_PER_SOL","PublicKey","useWallet","WalletDialogButton","awaitTransactionSignatureConfirmation","CANDY_MACHINE_PROGRAM","getCandyMachineState","mintOneToken","getFairLaunchState","punchTicket","purchaseTicket","formatNumber","getAtaForMint","toDate","CTAButton","MintButton","AntiRug","getPhase","Phase","PhaseHeader","GatewayProvider","ConnectButton","MintContainer","div","dialogStyles","theme","root","margin","padding","spacing","closeButton","position","right","top","color","palette","grey","ValueSlider","height","border","width","marginTop","background","boxShadow","display","lineHeight","fontSize","marginLeft","FAIR_LAUNCH_LOTTERY_SIZE","isWinner","fairLaunch","lottery","data","length","ticket","seq","state","phaseThreeStarted","myByte","Math","floor","toNumber","positionFromRight","mask","pow","Home","props","fairLaunchBalance","setFairLaunchBalance","yourSOLBalance","setYourSOLBalance","rpcUrl","rpcHost","isMinting","setIsMinting","contributed","setContributed","wallet","anchorWallet","publicKey","signAllTransactions","signTransaction","alertState","setAlertState","open","message","severity","undefined","setFairLaunch","candyMachine","setCandyMachine","howToOpen","setHowToOpen","refundExplainerOpen","setRefundExplainerOpen","onMint","document","getElementById","click","connected","program","unpunched","onPunchTicket","mintTxId","status","err","txTimeout","connection","error","msg","indexOf","code","window","location","reload","balance","getBalance","fairLaunchId","tokenMint","getTokenAccountBalance","value","uiAmount","e","console","log","phase","SetPrice","ticks","priceRangeEnd","priceRangeStart","tickSize","randomTick","round","random","currentMedian","candyMachineId","cndy","min","asNumber","max","step","median","marks","label","filter","_","onDeposit","onRefundTicket","candyMachinePredatesFairLaunch","goLiveDate","phaseTwoEnd","lt","notEnoughSOL","fee","amount","backgroundColor","borderRadius","marginBottom","fontWeight","format","AnticipationPhase","includes","GracePeriod","RaffleFinished","Lottery","withdrawn","paddingTop","gt","ev","val","justifyContent","alignItems","punched","Phase4","isActive","gatekeeper","gatekeeperNetwork","autoShowModal","style","toLocaleString","numberTicketsSold","treasury"],"mappings":"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","sourcesContent":["import { useEffect, useMemo, useState } from 'react';\nimport styled from 'styled-components';\nimport {\n  CircularProgress,\n  Container,\n  IconButton,\n  Link,\n  Slider,\n  Snackbar,\n} from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport { createStyles, Theme } from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport Alert from '@material-ui/lab/Alert';\n\nimport * as anchor from '@project-serum/anchor';\n\nimport { LAMPORTS_PER_SOL, PublicKey } from '@solana/web3.js';\n\nimport { useWallet } from '@solana/wallet-adapter-react';\nimport { WalletDialogButton } from '@solana/wallet-adapter-material-ui';\n\nimport {\n  awaitTransactionSignatureConfirmation,\n  CandyMachineAccount,\n  CANDY_MACHINE_PROGRAM,\n  getCandyMachineState,\n  mintOneToken,\n} from './candy-machine';\n\nimport {\n  FairLaunchAccount,\n  getFairLaunchState,\n  punchTicket,\n  purchaseTicket,\n} from './fair-launch';\n\nimport { AlertState, formatNumber, getAtaForMint, toDate } from './utils';\nimport { CTAButton, MintButton } from './MintButton';\nimport { AntiRug } from './AntiRug';\nimport { getPhase, Phase, PhaseHeader } from './PhaseHeader';\nimport { GatewayProvider } from '@civic/solana-gateway-react';\n\nconst ConnectButton = styled(WalletDialogButton)`\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n`;\n\nconst MintContainer = styled.div``; // add your styles here\n\nconst dialogStyles: any = (theme: Theme) =>\n  createStyles({\n    root: {\n      margin: 0,\n      padding: theme.spacing(2),\n    },\n    closeButton: {\n      position: 'absolute',\n      right: theme.spacing(1),\n      top: theme.spacing(1),\n      color: theme.palette.grey[500],\n    },\n  });\n\nconst ValueSlider = styled(Slider)({\n  color: '#C0D5FE',\n  height: 8,\n  '& > *': {\n    height: 4,\n  },\n  '& .MuiSlider-track': {\n    border: 'none',\n    height: 4,\n  },\n  '& .MuiSlider-thumb': {\n    height: 24,\n    width: 24,\n    marginTop: -10,\n    background: 'linear-gradient(180deg, #604AE5 0%, #813EEE 100%)',\n    border: '2px solid currentColor',\n    '&:focus, &:hover, &.Mui-active, &.Mui-focusVisible': {\n      boxShadow: 'inherit',\n    },\n    '&:before': {\n      display: 'none',\n    },\n  },\n  '& .MuiSlider-valueLabel': {\n    '& > *': {\n      background: 'linear-gradient(180deg, #604AE5 0%, #813EEE 100%)',\n    },\n    lineHeight: 1.2,\n    fontSize: 12,\n    padding: 0,\n    width: 32,\n    height: 32,\n    marginLeft: 9,\n  },\n});\n\nexport interface HomeProps {\n  candyMachineId?: anchor.web3.PublicKey;\n  fairLaunchId?: anchor.web3.PublicKey;\n  connection: anchor.web3.Connection;\n  startDate: number;\n  txTimeout: number;\n  rpcHost: string;\n}\n\nconst FAIR_LAUNCH_LOTTERY_SIZE =\n  8 + // discriminator\n  32 + // fair launch\n  1 + // bump\n  8; // size of bitmask ones\n\nconst isWinner = (fairLaunch: FairLaunchAccount | undefined): boolean => {\n  if (\n    !fairLaunch?.lottery.data ||\n    !fairLaunch?.lottery.data.length ||\n    !fairLaunch?.ticket.data?.seq ||\n    !fairLaunch?.state.phaseThreeStarted\n  ) {\n    return false;\n  }\n\n  const myByte =\n    fairLaunch.lottery.data[\n      FAIR_LAUNCH_LOTTERY_SIZE +\n        Math.floor(fairLaunch.ticket.data?.seq.toNumber() / 8)\n    ];\n\n  const positionFromRight = 7 - (fairLaunch.ticket.data?.seq.toNumber() % 8);\n  const mask = Math.pow(2, positionFromRight);\n  const isWinner = myByte & mask;\n  return isWinner > 0;\n};\n\nconst Home = (props: HomeProps) => {\n  const [fairLaunchBalance, setFairLaunchBalance] = useState<number>(0);\n  const [yourSOLBalance, setYourSOLBalance] = useState<number | null>(null);\n  const rpcUrl = props.rpcHost;\n\n  const [isMinting, setIsMinting] = useState(false); // true when user got to press MINT\n  const [contributed, setContributed] = useState(0);\n\n  const wallet = useWallet();\n\n  const anchorWallet = useMemo(() => {\n    if (\n      !wallet ||\n      !wallet.publicKey ||\n      !wallet.signAllTransactions ||\n      !wallet.signTransaction\n    ) {\n      return;\n    }\n\n    return {\n      publicKey: wallet.publicKey,\n      signAllTransactions: wallet.signAllTransactions,\n      signTransaction: wallet.signTransaction,\n    } as anchor.Wallet;\n  }, [wallet]);\n\n  const [alertState, setAlertState] = useState<AlertState>({\n    open: false,\n    message: '',\n    severity: undefined,\n  });\n\n  const [fairLaunch, setFairLaunch] = useState<FairLaunchAccount>();\n  const [candyMachine, setCandyMachine] = useState<CandyMachineAccount>();\n  const [howToOpen, setHowToOpen] = useState(false);\n  const [refundExplainerOpen, setRefundExplainerOpen] = useState(false);\n\n  const onMint = async () => {\n    try {\n      setIsMinting(true);\n      document.getElementById('#identity')?.click();\n      if (wallet.connected && candyMachine?.program && wallet.publicKey) {\n        if (fairLaunch?.ticket.data?.state.unpunched && isWinner(fairLaunch)) {\n          await onPunchTicket();\n        }\n\n        const mintTxId = (\n          await mintOneToken(candyMachine, wallet.publicKey)\n        )[0];\n\n        let status: any = { err: true };\n        if (mintTxId) {\n          status = await awaitTransactionSignatureConfirmation(\n            mintTxId,\n            props.txTimeout,\n            props.connection,\n            'singleGossip',\n            true,\n          );\n        }\n\n        if (!status?.err) {\n          setAlertState({\n            open: true,\n            message: 'Congratulations! Mint succeeded!',\n            severity: 'success',\n          });\n        } else {\n          setAlertState({\n            open: true,\n            message: 'Mint failed! Please try again!',\n            severity: 'error',\n          });\n        }\n      }\n    } catch (error: any) {\n      // TODO: blech:\n      let message = error.msg || 'Minting failed! Please try again!';\n      if (!error.msg) {\n        if (!error.message) {\n          message = 'Transaction Timeout! Please try again.';\n        } else if (error.message.indexOf('0x138')) {\n        } else if (error.message.indexOf('0x137')) {\n          message = `SOLD OUT!`;\n        } else if (error.message.indexOf('0x135')) {\n          message = `Insufficient funds to mint. Please fund your wallet.`;\n        }\n      } else {\n        if (error.code === 311) {\n          message = `SOLD OUT!`;\n          window.location.reload();\n        } else if (error.code === 312) {\n          message = `Minting period hasn't started yet.`;\n        }\n      }\n\n      setAlertState({\n        open: true,\n        message,\n        severity: 'error',\n      });\n    } finally {\n      setIsMinting(false);\n    }\n  };\n\n  useEffect(() => {\n    (async () => {\n      if (!anchorWallet) {\n        return;\n      }\n\n      try {\n        const balance = await props.connection.getBalance(\n          anchorWallet.publicKey,\n        );\n        setYourSOLBalance(balance);\n\n        if (props.fairLaunchId) {\n          const state = await getFairLaunchState(\n            anchorWallet,\n            props.fairLaunchId,\n            props.connection,\n          );\n\n          setFairLaunch(state);\n\n          try {\n            if (state.state.tokenMint) {\n              const fairLaunchBalance =\n                await props.connection.getTokenAccountBalance(\n                  (\n                    await getAtaForMint(\n                      state.state.tokenMint,\n                      anchorWallet.publicKey,\n                    )\n                  )[0],\n                );\n\n              if (fairLaunchBalance.value) {\n                setFairLaunchBalance(fairLaunchBalance.value.uiAmount || 0);\n              }\n            }\n          } catch (e) {\n            console.log('Problem getting fair launch token balance');\n            console.log(e);\n          }\n          if (contributed === 0) {\n            const phase = getPhase(state, undefined);\n\n            if (phase === Phase.SetPrice) {\n              const ticks =\n                (state.state.data.priceRangeEnd.toNumber() -\n                  state.state.data.priceRangeStart.toNumber()) /\n                state.state.data.tickSize.toNumber();\n              const randomTick = Math.round(Math.random() * ticks);\n\n              setContributed(\n                (state.state.data.priceRangeStart.toNumber() +\n                  randomTick * state.state.data.tickSize.toNumber()) /\n                  LAMPORTS_PER_SOL,\n              );\n            } else {\n              setContributed(\n                (\n                  state.state.currentMedian || state.state.data.priceRangeStart\n                ).toNumber() / LAMPORTS_PER_SOL,\n              );\n            }\n          }\n        } else {\n          console.log('No fair launch detected in configuration.');\n        }\n      } catch (e) {\n        console.log('Problem getting fair launch state');\n        console.log(e);\n      }\n      if (props.candyMachineId) {\n        try {\n          const cndy = await getCandyMachineState(\n            anchorWallet,\n            props.candyMachineId,\n            props.connection,\n          );\n          setCandyMachine(cndy);\n        } catch (e) {\n          console.log('Problem getting candy machine state');\n          console.log(e);\n        }\n      } else {\n        console.log('No candy machine detected in configuration.');\n      }\n    })();\n  }, [\n    anchorWallet,\n    props.candyMachineId,\n    props.connection,\n    props.fairLaunchId,\n    contributed,\n  ]);\n\n  const min = formatNumber.asNumber(fairLaunch?.state.data.priceRangeStart);\n  const max = formatNumber.asNumber(fairLaunch?.state.data.priceRangeEnd);\n  const step = formatNumber.asNumber(fairLaunch?.state.data.tickSize);\n  const median = formatNumber.asNumber(fairLaunch?.state.currentMedian);\n  const phase = getPhase(fairLaunch, candyMachine);\n  console.log('Phase', phase);\n  const marks = [\n    {\n      value: min || 0,\n      label: `${min} SOL`,\n    },\n    // TODO:L\n    ...(phase === Phase.SetPrice\n      ? []\n      : [\n          {\n            value: median || 0,\n            label: `${median}`,\n          },\n        ]),\n    // display user comitted value\n    // {\n    //   value: 37,\n    //   label: '37Â°C',\n    // },\n    {\n      value: max || 0,\n      label: `${max} SOL`,\n    },\n  ].filter(_ => _ !== undefined && _.value !== 0) as any;\n\n  const onDeposit = async () => {\n    if (!anchorWallet) {\n      return;\n    }\n\n    console.log('deposit');\n    setIsMinting(true);\n    try {\n      await purchaseTicket(contributed, anchorWallet, fairLaunch);\n      setIsMinting(false);\n      setAlertState({\n        open: true,\n        message: `Congratulations! Bid ${\n          fairLaunch?.ticket.data ? 'updated' : 'inserted'\n        }!`,\n        severity: 'success',\n      });\n    } catch (e) {\n      console.log(e);\n      setIsMinting(false);\n      setAlertState({\n        open: true,\n        message: 'Something went wrong.',\n        severity: 'error',\n      });\n    }\n  };\n  const onRefundTicket = async () => {\n    if (!anchorWallet) {\n      return;\n    }\n\n    console.log('refund');\n    try {\n      setIsMinting(true);\n      await purchaseTicket(0, anchorWallet, fairLaunch);\n      setIsMinting(false);\n      setAlertState({\n        open: true,\n        message:\n          'Congratulations! Funds withdrawn. This is an irreversible action.',\n        severity: 'success',\n      });\n    } catch (e) {\n      console.log(e);\n      setIsMinting(false);\n      setAlertState({\n        open: true,\n        message: 'Something went wrong.',\n        severity: 'error',\n      });\n    }\n  };\n\n  const onPunchTicket = async () => {\n    if (!anchorWallet || !fairLaunch || !fairLaunch.ticket) {\n      return;\n    }\n\n    console.log('punch');\n    setIsMinting(true);\n    try {\n      await punchTicket(anchorWallet, fairLaunch);\n      setIsMinting(false);\n      setAlertState({\n        open: true,\n        message: 'Congratulations! Ticket punched!',\n        severity: 'success',\n      });\n    } catch (e) {\n      console.log(e);\n      setIsMinting(false);\n      setAlertState({\n        open: true,\n        message: 'Something went wrong.',\n        severity: 'error',\n      });\n    }\n  };\n\n  const candyMachinePredatesFairLaunch =\n    candyMachine?.state.goLiveDate &&\n    fairLaunch?.state.data.phaseTwoEnd &&\n    candyMachine?.state.goLiveDate.lt(fairLaunch?.state.data.phaseTwoEnd);\n\n  const notEnoughSOL = !!(\n    yourSOLBalance != null &&\n    fairLaunch?.state.data.priceRangeStart &&\n    fairLaunch?.state.data.fee &&\n    yourSOLBalance + (fairLaunch?.ticket?.data?.amount.toNumber() || 0) <\n      contributed * LAMPORTS_PER_SOL +\n        fairLaunch?.state.data.fee.toNumber() +\n        0.01\n  );\n\n  return (\n    <Container style={{ marginTop: 100 }}>\n      {fairLaunch && (\n        <AntiRug\n          fairLaunch={fairLaunch}\n          isMinting={[isMinting, setIsMinting]}\n          setAlertState={setAlertState}\n        />\n      )}\n      <Container maxWidth=\"xs\" style={{ position: 'relative' }}>\n        <Paper\n          style={{ padding: 24, backgroundColor: '#151A1F', borderRadius: 6 }}\n        >\n          <Grid container justifyContent=\"center\" direction=\"column\">\n            <PhaseHeader\n              phase={phase}\n              fairLaunch={fairLaunch}\n              candyMachine={candyMachine}\n              rpcUrl={rpcUrl}\n              candyMachinePredatesFairLaunch={!!candyMachinePredatesFairLaunch}\n            />\n            {fairLaunch && (\n              <Grid\n                container\n                direction=\"column\"\n                justifyContent=\"center\"\n                alignItems=\"center\"\n                style={{\n                  height: 200,\n                  marginTop: 20,\n                  marginBottom: 20,\n                  background: '#384457',\n                  borderRadius: 6,\n                }}\n              >\n                {fairLaunch.ticket.data ? (\n                  <>\n                    <Typography>Your bid</Typography>\n                    <Typography variant=\"h6\" style={{ fontWeight: 900 }}>\n                      {formatNumber.format(\n                        (fairLaunch?.ticket.data?.amount.toNumber() || 0) /\n                          LAMPORTS_PER_SOL,\n                      )}{' '}\n                      SOL\n                    </Typography>\n                  </>\n                ) : [Phase.AnticipationPhase, Phase.SetPrice].includes(\n                    phase,\n                  ) ? (\n                  <Typography>\n                    You haven't entered this raffle yet. <br />\n                    {fairLaunch?.state?.data?.fee && (\n                      <span>\n                        <b>\n                          All initial bids will incur a â{' '}\n                          {fairLaunch?.state?.data?.fee.toNumber() /\n                            LAMPORTS_PER_SOL}{' '}\n                          fee.\n                        </b>\n                      </span>\n                    )}\n                  </Typography>\n                ) : (\n                  <Typography>\n                    You didn't participate in this raffle.\n                  </Typography>\n                )}\n              </Grid>\n            )}\n\n            {fairLaunch && (\n              <>\n                {[\n                  Phase.SetPrice,\n                  Phase.GracePeriod,\n                  Phase.RaffleFinished,\n                  Phase.Lottery,\n                ].includes(phase) &&\n                  fairLaunch?.ticket?.data?.state.withdrawn && (\n                    <div style={{ paddingTop: '15px' }}>\n                      <Alert severity=\"error\">\n                        Your bid was withdrawn and cannot be adjusted or\n                        re-inserted.\n                      </Alert>\n                    </div>\n                  )}\n                {[Phase.GracePeriod].includes(phase) &&\n                  fairLaunch.state.currentMedian &&\n                  fairLaunch?.ticket?.data?.amount &&\n                  !fairLaunch?.ticket?.data?.state.withdrawn &&\n                  fairLaunch.state.currentMedian.gt(\n                    fairLaunch?.ticket?.data?.amount,\n                  ) && (\n                    <div style={{ paddingTop: '15px' }}>\n                      <Alert severity=\"warning\">\n                        Your bid is currently below the median and will not be\n                        eligible for the raffle.\n                      </Alert>\n                    </div>\n                  )}\n                {[Phase.RaffleFinished, Phase.Lottery].includes(phase) &&\n                  fairLaunch.state.currentMedian &&\n                  fairLaunch?.ticket?.data?.amount &&\n                  !fairLaunch?.ticket?.data?.state.withdrawn &&\n                  fairLaunch.state.currentMedian.gt(\n                    fairLaunch?.ticket?.data?.amount,\n                  ) && (\n                    <div style={{ paddingTop: '15px' }}>\n                      <Alert severity=\"error\">\n                        Your bid was below the median and was not included in\n                        the raffle. You may click <em>Withdraw</em> when the\n                        raffle ends or you will be automatically issued one when\n                        the Fair Launch authority withdraws from the treasury.\n                      </Alert>\n                    </div>\n                  )}\n                {notEnoughSOL && (\n                  <Alert severity=\"error\">\n                    You do not have enough SOL in your account to place this\n                    bid.\n                  </Alert>\n                )}\n              </>\n            )}\n\n            {[Phase.SetPrice, Phase.GracePeriod].includes(phase) && (\n              <>\n                <Grid style={{ marginTop: 40, marginBottom: 20 }}>\n                  {contributed > 0 ? (\n                    <ValueSlider\n                      min={min}\n                      marks={marks}\n                      max={max}\n                      step={step}\n                      value={contributed}\n                      onChange={(ev, val) => setContributed(val as any)}\n                      valueLabelDisplay=\"auto\"\n                      style={{\n                        width: 'calc(100% - 40px)',\n                        marginLeft: 20,\n                        height: 30,\n                      }}\n                    />\n                  ) : (\n                    <div\n                      style={{\n                        display: 'flex',\n                        justifyContent: 'center',\n                        alignItems: 'center',\n                      }}\n                    >\n                      <CircularProgress />\n                    </div>\n                  )}\n                </Grid>\n              </>\n            )}\n\n            {!wallet.connected ? (\n              <ConnectButton>\n                Connect{' '}\n                {[Phase.SetPrice].includes(phase) ? 'to bid' : 'to see status'}\n              </ConnectButton>\n            ) : (\n              <div>\n                {[Phase.SetPrice, Phase.GracePeriod].includes(phase) && (\n                  <>\n                    <CTAButton\n                      onClick={onDeposit}\n                      variant=\"contained\"\n                      disabled={\n                        isMinting ||\n                        (!fairLaunch?.ticket.data &&\n                          phase === Phase.GracePeriod) ||\n                        notEnoughSOL\n                      }\n                    >\n                      {isMinting ? (\n                        <CircularProgress />\n                      ) : !fairLaunch?.ticket.data ? (\n                        'Place bid'\n                      ) : (\n                        'Change bid'\n                      )}\n                      {}\n                    </CTAButton>\n                  </>\n                )}\n\n                {[Phase.RaffleFinished].includes(phase) && (\n                  <>\n                    {isWinner(fairLaunch) && (\n                      <CTAButton\n                        onClick={onPunchTicket}\n                        variant=\"contained\"\n                        disabled={\n                          fairLaunch?.ticket.data?.state.punched !== undefined\n                        }\n                      >\n                        {isMinting ? <CircularProgress /> : 'Punch Ticket'}\n                      </CTAButton>\n                    )}\n\n                    {!isWinner(fairLaunch) && (\n                      <CTAButton\n                        onClick={onRefundTicket}\n                        variant=\"contained\"\n                        disabled={\n                          isMinting ||\n                          fairLaunch?.ticket.data === undefined ||\n                          fairLaunch?.ticket.data?.state.withdrawn !== undefined\n                        }\n                      >\n                        {isMinting ? <CircularProgress /> : 'Withdraw'}\n                      </CTAButton>\n                    )}\n                  </>\n                )}\n\n                {phase === Phase.Phase4 && (\n                  <>\n                    {(!fairLaunch ||\n                      isWinner(fairLaunch) ||\n                      fairLaunchBalance > 0) && (\n                      <MintContainer>\n                        {candyMachine?.state.isActive &&\n                        candyMachine?.state.gatekeeper &&\n                        wallet.publicKey &&\n                        wallet.signTransaction ? (\n                          <GatewayProvider\n                            wallet={{\n                              publicKey:\n                                wallet.publicKey ||\n                                new PublicKey(CANDY_MACHINE_PROGRAM),\n                              //@ts-ignore\n                              signTransaction: wallet.signTransaction,\n                            }}\n                            // // Replace with following when added\n                            // gatekeeperNetwork={candyMachine.state.gatekeeper_network}\n                            gatekeeperNetwork={\n                              candyMachine?.state?.gatekeeper?.gatekeeperNetwork\n                            } // This is the ignite (captcha) network\n                            /// Don't need this for mainnet\n                            clusterUrl={rpcUrl}\n                            options={{ autoShowModal: false }}\n                          >\n                            <MintButton\n                              candyMachine={candyMachine}\n                              fairLaunch={fairLaunch}\n                              isMinting={isMinting}\n                              fairLaunchBalance={fairLaunchBalance}\n                              onMint={onMint}\n                            />\n                          </GatewayProvider>\n                        ) : (\n                          <MintButton\n                            candyMachine={candyMachine}\n                            fairLaunch={fairLaunch}\n                            isMinting={isMinting}\n                            fairLaunchBalance={fairLaunchBalance}\n                            onMint={onMint}\n                          />\n                        )}\n                      </MintContainer>\n                    )}\n\n                    {!(\n                      !fairLaunch ||\n                      isWinner(fairLaunch) ||\n                      fairLaunchBalance > 0\n                    ) && (\n                      <CTAButton\n                        onClick={onRefundTicket}\n                        variant=\"contained\"\n                        disabled={\n                          isMinting ||\n                          fairLaunch?.ticket.data === undefined ||\n                          fairLaunch?.ticket.data?.state.withdrawn !== undefined\n                        }\n                      >\n                        {isMinting ? <CircularProgress /> : 'Withdraw'}\n                      </CTAButton>\n                    )}\n                  </>\n                )}\n              </div>\n            )}\n\n            <Grid\n              container\n              justifyContent=\"space-between\"\n              color=\"textSecondary\"\n            >\n              {fairLaunch && (\n                <Link\n                  component=\"button\"\n                  variant=\"body2\"\n                  color=\"textSecondary\"\n                  align=\"left\"\n                  onClick={() => {\n                    setHowToOpen(true);\n                  }}\n                >\n                  How this raffle works\n                </Link>\n              )}\n              {fairLaunch?.ticket.data && (\n                <Link\n                  component=\"button\"\n                  variant=\"body2\"\n                  color=\"textSecondary\"\n                  align=\"right\"\n                  onClick={() => {\n                    if (\n                      !fairLaunch ||\n                      phase === Phase.Lottery ||\n                      isWinner(fairLaunch) ||\n                      fairLaunchBalance > 0\n                    ) {\n                      setRefundExplainerOpen(true);\n                    } else {\n                      onRefundTicket();\n                    }\n                  }}\n                >\n                  Withdraw funds\n                </Link>\n              )}\n            </Grid>\n            <Dialog\n              open={refundExplainerOpen}\n              onClose={() => setRefundExplainerOpen(false)}\n              PaperProps={{\n                style: { backgroundColor: '#222933', borderRadius: 6 },\n              }}\n            >\n              <MuiDialogContent style={{ padding: 24 }}>\n                During raffle phases, or if you are a winner, or if this website\n                is not configured to be a fair launch but simply a candy\n                machine, refunds are disallowed.\n              </MuiDialogContent>\n            </Dialog>\n            <Dialog\n              open={howToOpen}\n              onClose={() => setHowToOpen(false)}\n              PaperProps={{\n                style: { backgroundColor: '#222933', borderRadius: 6 },\n              }}\n            >\n              <MuiDialogTitle\n                disableTypography\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'space-between',\n                }}\n              >\n                <Link\n                  component=\"button\"\n                  variant=\"h6\"\n                  color=\"textSecondary\"\n                  onClick={() => {\n                    setHowToOpen(true);\n                  }}\n                >\n                  How it works\n                </Link>\n                <IconButton\n                  aria-label=\"close\"\n                  className={dialogStyles.closeButton}\n                  onClick={() => setHowToOpen(false)}\n                >\n                  <CloseIcon />\n                </IconButton>\n              </MuiDialogTitle>\n              <MuiDialogContent>\n                <Typography variant=\"h6\">\n                  Phase 1 - Set the fair price:\n                </Typography>\n                <Typography gutterBottom color=\"textSecondary\">\n                  Enter a bid in the range provided by the artist. The median of\n                  all bids will be the \"fair\" price of the raffle ticket.{' '}\n                  {fairLaunch?.state?.data?.fee && (\n                    <span>\n                      <b>\n                        All bids will incur a â{' '}\n                        {fairLaunch?.state?.data?.fee.toNumber() /\n                          LAMPORTS_PER_SOL}{' '}\n                        fee.\n                      </b>\n                    </span>\n                  )}\n                </Typography>\n                <Typography variant=\"h6\">Phase 2 - Grace period:</Typography>\n                <Typography gutterBottom color=\"textSecondary\">\n                  If your bid was at or above the fair price, you automatically\n                  get a raffle ticket at that price. There's nothing else you\n                  need to do. Your excess SOL will be returned to you when the\n                  Fair Launch authority withdraws from the treasury. If your bid\n                  is below the median price, you can still opt in at the fair\n                  price during this phase.\n                </Typography>\n                {candyMachinePredatesFairLaunch ? (\n                  <>\n                    <Typography variant=\"h6\">\n                      Phase 3 - The Candy Machine:\n                    </Typography>\n                    <Typography gutterBottom color=\"textSecondary\">\n                      Everyone who got a raffle ticket at the fair price is\n                      entered to win an NFT. If you win an NFT, congrats. If you\n                      donât, no worries, your SOL will go right back into your\n                      wallet.\n                    </Typography>\n                  </>\n                ) : (\n                  <>\n                    <Typography variant=\"h6\">Phase 3 - The Lottery:</Typography>\n                    <Typography gutterBottom color=\"textSecondary\">\n                      Everyone who got a raffle ticket at the fair price is\n                      entered to win a Fair Launch Token that entitles them to\n                      an NFT at a later date using a Candy Machine here. If you\n                      donât win, no worries, your SOL will go right back into\n                      your wallet.\n                    </Typography>\n                    <Typography variant=\"h6\">\n                      Phase 4 - The Candy Machine:\n                    </Typography>\n                    <Typography gutterBottom color=\"textSecondary\">\n                      On{' '}\n                      {candyMachine?.state.goLiveDate\n                        ? toDate(\n                            candyMachine?.state.goLiveDate,\n                          )?.toLocaleString()\n                        : ' some later date'}\n                      , you will be able to exchange your Fair Launch token for\n                      an NFT using the Candy Machine at this site by pressing\n                      the Mint Button.\n                    </Typography>\n                  </>\n                )}\n              </MuiDialogContent>\n            </Dialog>\n\n            {/* {wallet.connected && (\n              <p>\n                Address: {shortenAddress(wallet.publicKey?.toBase58() || '')}\n              </p>\n            )}\n\n            {wallet.connected && (\n              <p>Balance: {(balance || 0).toLocaleString()} SOL</p>\n            )} */}\n          </Grid>\n        </Paper>\n      </Container>\n\n      {fairLaunch && (\n        <Container\n          maxWidth=\"xs\"\n          style={{ position: 'relative', marginTop: 10 }}\n        >\n          <div style={{ margin: 20 }}>\n            <Grid container direction=\"row\" wrap=\"nowrap\">\n              <Grid container md={4} direction=\"column\">\n                <Typography variant=\"body2\" color=\"textSecondary\">\n                  Bids\n                </Typography>\n                <Typography\n                  variant=\"h6\"\n                  color=\"textPrimary\"\n                  style={{ fontWeight: 'bold' }}\n                >\n                  {fairLaunch?.state.numberTicketsSold.toNumber() || 0}\n                </Typography>\n              </Grid>\n              <Grid container md={4} direction=\"column\">\n                <Typography variant=\"body2\" color=\"textSecondary\">\n                  Median bid\n                </Typography>\n                <Typography\n                  variant=\"h6\"\n                  color=\"textPrimary\"\n                  style={{ fontWeight: 'bold' }}\n                >\n                  â{' '}\n                  {phase === Phase.AnticipationPhase || phase === Phase.SetPrice\n                    ? '???'\n                    : formatNumber.format(median)}\n                </Typography>\n              </Grid>\n              <Grid container md={4} direction=\"column\">\n                <Typography variant=\"body2\" color=\"textSecondary\">\n                  Total raised\n                </Typography>\n                <Typography\n                  variant=\"h6\"\n                  color=\"textPrimary\"\n                  style={{ fontWeight: 'bold' }}\n                >\n                  â{' '}\n                  {formatNumber.format(\n                    (fairLaunch?.treasury || 0) / LAMPORTS_PER_SOL,\n                  )}\n                </Typography>\n              </Grid>\n            </Grid>\n          </div>\n        </Container>\n      )}\n      <Snackbar\n        open={alertState.open}\n        autoHideDuration={6000}\n        onClose={() => setAlertState({ ...alertState, open: false })}\n      >\n        <Alert\n          onClose={() => setAlertState({ ...alertState, open: false })}\n          severity={alertState.severity}\n        >\n          {alertState.message}\n        </Alert>\n      </Snackbar>\n    </Container>\n  );\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}